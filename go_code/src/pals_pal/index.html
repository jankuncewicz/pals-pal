<html>
	<head>
		<meta charset="utf-8">
		<script src="wasm_exec.js"></script>
		<script>
			const go = new Go();
			let mod, inst;
			WebAssembly.instantiateStreaming(fetch("main.wasm"), go.importObject)
				.then(result => {
					mod = result.module;
					inst = result.instance;
					document.getElementById("submit").disabled = false;
				});
			
			async function run(){
				await go.run(inst);
				inst = await WebAssembly.instantiate(mod, go.importObject);
				return false;
			}

		</script>
		<style>
			#whole{
				max-width: 500px;
				margin: auto;
			}
			.text{
				width: 250px;
				padding: 5px;
			}
			#nm{
				width: 100px;
			}
		</style>
	</head>
	<body>
		<div id="whole">
		<form id="form" onsubmit="run();" autocomplete="off">
		<div class="text">
			<label for="tau">Tau (ns)</label>
			<br>
			<input type="text" id="tau" required>
		</div>
		<div class="text">
			<label for="temp">Temperature (K)</label>
			<br>
			<input type="text" id="temp" value="293" required>
		</div>
		<div class="text">
			<label for="delta">Delta (nm)</label>
			<br>
			<input type="text" id="delta" value="0.165" required>
		</div>
		<div class="text" id="nm">
			<label for="n">n</label>
			<br>
			<input type="text" id="n" value="20" size="3" required>
		</div>
		<div class="text" id="nm">
			<label for="m">m</label>
			<br>
			<input type="text" id="m" value="20" size="3" required>
		</div>
		<div class="text">
			<label for="ans">R (nm)</label>
			<br>
			<input id="ans" type="text" readonly>
		</div>
		<div class="text">
			<input id="submit" type="submit" disabled value="Calculate">
		</div>
		</form>
		</div>
		<script>
			document.getElementById("form").addEventListener("submit", e => e.preventDefault())
		</script>
	</body>
</html>